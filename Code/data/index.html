<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bigga Weather Station</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Bigga Weather Station</h1>
            <div class="realtime-clock" id="realtimeClock">--:--:--</div>
            <div class="notification-wrapper">
                <button id="notificationBtn" class="btn-notification" title="Th√¥ng b√°o">üîî</button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h4>üîî Th√¥ng b√°o</h4>
                        <button class="btn-clear-notif" id="clearNotifBtn">X√≥a t·∫•t c·∫£</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="notification-empty">
                            <div class="icon">üì≠</div>
                            <div>Ch∆∞a c√≥ th√¥ng b√°o n√†o</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Weather Dashboard -->
        <div class="dashboard">
            <div class="weather-card">
                <div class="icon">üå°Ô∏è</div>
                <div class="label">Nhi·ªát ƒë·ªô</div>
                <div class="value" id="temperature">--¬∞C</div>
            </div>
            <div class="weather-card">
                <div class="icon">üíß</div>
                <div class="label">ƒê·ªô ·∫©m</div>
                <div class="value" id="humidity">--%</div>
            </div>
            <div class="weather-card">
                <div class="icon">üåßÔ∏è</div>
                <div class="label">M·ª©c m∆∞a</div>
                <div class="value" id="rain_level">0%</div>
            </div>      
            <div class="weather-card">
                <div class="icon">üéê</div>
                <div class="label">T·ªëc ƒë·ªô gi√≥</div>
                <div class="value" id="wind_speed">0 km/h</div>
            </div>
            <div class="weather-card">
                <div class="icon">üîΩ</div>
                <div class="label">√Åp su·∫•t</div>
                <div class="value" id="pressure">-- hPa</div>
            </div>
            <div class="weather-card status">
                <div class="icon">‚òî</div>
                <div class="label">Tr·∫°ng th√°i</div>
                <div class="value" id="rain_status">--</div>
            </div>
        </div>

        <!-- Realtime Charts Section -->
        <div class="charts-section">
            <h3>üìä Bi·ªÉu ƒë·ªì th·ªùi gian th·ª±c</h3>
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-title">üå°Ô∏è Nhi·ªát ƒë·ªô (¬∞C)</div>
                    <canvas id="tempChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">üíß ƒê·ªô ·∫©m (%)</div>
                    <canvas id="humidityChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">üåßÔ∏è M·ª©c m∆∞a (%)</div>
                    <canvas id="rainChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">üéê T·ªëc ƒë·ªô gi√≥ (km/h)</div>
                    <canvas id="windChart"></canvas>
                </div>
                <div class="chart-card full-width">
                    <div class="chart-title">üîΩ √Åp su·∫•t (hPa)</div>
                    <canvas id="pressureChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-header">
                <h2>üí¨ Chat v·ªõi AI Assistant</h2>
                <button id="clearChat" class="btn-clear">üóëÔ∏è X√≥a</button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div class="avatar">ü§ñ</div>
                    <div class="text">
                        <strong>AI Assistant</strong>
                        <p>Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI c·ªßa tr·∫°m th·ªùi ti·∫øt. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, t·ªëc ƒë·ªô gi√≥, hay b·∫•t k·ª≥ th√¥ng tin th·ªùi ti·∫øt n√†o!</p>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <button id="voiceBtn" class="btn-voice" title="Nh·∫•n ƒë·ªÉ n√≥i">üé§</button>
                <input type="text" id="chatInput" placeholder="H·ªèi v·ªÅ th·ªùi ti·∫øt... (VD: Nhi·ªát ƒë·ªô b√¢y gi·ªù th·∫ø n√†o?)" />
                <button id="sendBtn" class="btn-send">G·ª≠i ‚û§</button>
            </div>

            <div class="status-bar">
                <span id="statusText">S·∫µn s√†ng</span>
                <span id="voiceStatus" class="voice-status"></span>
            </div>
        </div>

        <!-- Settings Panel -->
        <div class="settings-panel">
            <h3>‚öôÔ∏è C√†i ƒë·∫∑t</h3>
            <div class="setting-item">
                <label>
                    <input type="checkbox" id="autoSpeak" checked />
                    T·ª± ƒë·ªông ƒë·ªçc c√¢u tr·∫£ l·ªùi
                </label>
            </div>
            <div class="setting-item">
                <label for="voiceSelect">Gi·ªçng ƒë·ªçc:</label>
                <select id="voiceSelect">
                    <option value="">ƒêang t·∫£i...</option>
                </select>
            </div>

            <!-- Email Notification Settings -->
            <div class="email-settings-section">
                <h4>üìß Th√¥ng b√°o Email</h4>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="emailEnabled" />
                        B·∫≠t th√¥ng b√°o qua email
                    </label>
                </div>
                <div class="setting-item">
                    <label>Email g·ª≠i (Gmail):</label>
                    <input type="email" id="emailSender" placeholder="yourname@gmail.com" />
                </div>
                <div class="setting-item">
                    <label>App Password:</label>
                    <input type="password" id="emailPassword" placeholder="xxxx xxxx xxxx xxxx" />
                    <small>T·∫°o t·∫°i: <a href="https://myaccount.google.com/apppasswords" target="_blank">myaccount.google.com/apppasswords</a></small>
                </div>
                <div class="setting-item">
                    <label>Email nh·∫≠n th√¥ng b√°o:</label>
                    <input type="email" id="emailRecipient" placeholder="recipient@example.com" />
                </div>
                <div class="threshold-section">
                    <h5>Ng∆∞·ª°ng c·∫£nh b√°o:</h5>
                    <div class="threshold-grid">
                        <div class="threshold-item">
                            <label>üî• N√≥ng (¬∞C):</label>
                            <input type="number" id="alertTempHigh" value="30" />
                        </div>
                        <div class="threshold-item">
                            <label>‚ùÑÔ∏è L·∫°nh (¬∞C):</label>
                            <input type="number" id="alertTempLow" value="20" />
                        </div>
                        <div class="threshold-item">
                            <label>üåßÔ∏è M∆∞a (%):</label>
                            <input type="number" id="alertRainLevel" value="50" />
                        </div>
                        <div class="threshold-item">
                            <label>üí® Gi√≥ (km/h):</label>
                            <input type="number" id="alertWindSpeed" value="30" />
                        </div>
                    </div>
                </div>
                <div class="email-buttons">
                    <button id="saveEmailBtn" class="btn-save">üíæ L∆∞u</button>
                    <button id="testEmailBtn" class="btn-test">üì® G·ª≠i th·ª≠</button>
                </div>
                <div class="email-status" id="emailStatus"></div>
            </div>
        </div>

        <!-- OTA Update Panel -->
        <div class="ota-panel">
            <h3>üîÑ C·∫≠p nh·∫≠t Firmware</h3>
            <div class="version-info">
                <span>Phi√™n b·∫£n hi·ªán t·∫°i: </span>
                <strong id="currentVersion">v1.0</strong>
            </div>
            <div class="ota-form">
                <input type="file" id="firmwareFile" accept=".bin" />
                <button id="uploadBtn" class="btn-upload">üì§ Upload Firmware</button>
            </div>
            <div class="ota-progress" id="otaProgress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span id="progressText">0%</span>
            </div>
            <div class="ota-status" id="otaStatus"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
